{
  "openapi": "3.0.4",
  "info": {
    "title": "Queue OpenAPI for fal-ai/birefnet/v2",
    "version": "1.0.0",
    "description": "The OpenAPI schema for the fal-ai/birefnet/v2 queue.",
    "x-fal-metadata": {
      "endpointId": "fal-ai/birefnet/v2",
      "category": "image-to-image",
      "thumbnailUrl": "https://storage.googleapis.com/falserverless/gallery/birefnet.webp",
      "playgroundUrl": "https://fal.ai/models/fal-ai/birefnet/v2",
      "documentationUrl": "https://fal.ai/models/fal-ai/birefnet/v2/api"
    }
  },
  "components": {
    "securitySchemes": {
      "apiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "Authorization",
        "description": "Fal Key"
      }
    },
    "schemas": {
      "QueueStatus": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "IN_QUEUE",
              "IN_PROGRESS",
              "COMPLETED"
            ]
          },
          "request_id": {
            "type": "string",
            "description": "The request id."
          },
          "response_url": {
            "type": "string",
            "description": "The response url."
          },
          "status_url": {
            "type": "string",
            "description": "The status url."
          },
          "cancel_url": {
            "type": "string",
            "description": "The cancel url."
          },
          "logs": {
            "type": "object",
            "description": "The logs.",
            "additionalProperties": true
          },
          "metrics": {
            "type": "object",
            "description": "The metrics.",
            "additionalProperties": true
          },
          "queue_position": {
            "type": "integer",
            "description": "The queue position."
          }
        },
        "required": [
          "status",
          "request_id"
        ]
      },
      "BirefnetV2Input": {
        "title": "InputV2",
        "type": "object",
        "properties": {
          "operating_resolution": {
            "enum": [
              "1024x1024",
              "2048x2048",
              "2304x2304"
            ],
            "title": "Operating Resolution",
            "type": "string",
            "description": "The resolution to operate on. The higher the resolution, the more accurate the output will be for high res input images. The '2304x2304' option is only available for the 'General Use (Dynamic)' model.",
            "default": "1024x1024"
          },
          "output_format": {
            "enum": [
              "webp",
              "png",
              "gif"
            ],
            "title": "Output Format",
            "type": "string",
            "description": "The format of the output image",
            "default": "png"
          },
          "image_url": {
            "examples": [
              "https://storage.googleapis.com/falserverless/example_inputs/birefnet-input.jpeg"
            ],
            "title": "Image Url",
            "type": "string",
            "description": "URL of the image to remove background from"
          },
          "model": {
            "enum": [
              "General Use (Light)",
              "General Use (Light 2K)",
              "General Use (Heavy)",
              "Matting",
              "Portrait",
              "General Use (Dynamic)"
            ],
            "title": "Model",
            "type": "string",
            "description": "\n            Model to use for background removal.\n            The 'General Use (Light)' model is the original model used in the BiRefNet repository.\n            The 'General Use (Light 2K)' model is the original model used in the BiRefNet repository but trained with 2K images.\n            The 'General Use (Heavy)' model is a slower but more accurate model.\n            The 'Matting' model is a model trained specifically for matting images.\n            The 'Portrait' model is a model trained specifically for portrait images.\n            The 'General Use (Dynamic)' model supports dynamic resolutions from 256x256 to 2304x2304.\n            The 'General Use (Light)' model is recommended for most use cases.\n\n            The corresponding models are as follows:\n            - 'General Use (Light)': BiRefNet\n            - 'General Use (Light 2K)': BiRefNet_lite-2K\n            - 'General Use (Heavy)': BiRefNet_lite\n            - 'Matting': BiRefNet-matting\n            - 'Portrait': BiRefNet-portrait\n            - 'General Use (Dynamic)': BiRefNet_dynamic\n        ",
            "default": "General Use (Light)"
          },
          "sync_mode": {
            "title": "Sync Mode",
            "type": "boolean",
            "description": "If `True`, the media will be returned as a data URI and the output data won't be available in the request history.",
            "default": false
          },
          "output_mask": {
            "title": "Output Mask",
            "type": "boolean",
            "description": "Whether to output the mask used to remove the background",
            "default": false
          },
          "refine_foreground": {
            "title": "Refine Foreground",
            "type": "boolean",
            "description": "Whether to refine the foreground using the estimated mask",
            "default": true
          }
        },
        "x-fal-order-properties": [
          "model",
          "operating_resolution",
          "output_mask",
          "refine_foreground",
          "sync_mode",
          "image_url",
          "output_format"
        ],
        "required": [
          "image_url"
        ]
      },
      "BirefnetV2Output": {
        "title": "Output",
        "type": "object",
        "properties": {
          "image": {
            "examples": [
              {
                "height": 1024,
                "file_name": "birefnet-output.png",
                "content_type": "image/png",
                "url": "https://storage.googleapis.com/falserverless/example_outputs/birefnet-output.png",
                "width": 1024
              }
            ],
            "title": "Image",
            "description": "Image with background removed",
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageFile"
              }
            ]
          },
          "mask_image": {
            "title": "Mask Image",
            "description": "Mask used to remove the background",
            "allOf": [
              {
                "$ref": "#/components/schemas/ImageFile"
              }
            ]
          }
        },
        "x-fal-order-properties": [
          "image",
          "mask_image"
        ],
        "required": [
          "image"
        ]
      },
      "ImageFile": {
        "title": "ImageFile",
        "type": "object",
        "properties": {
          "height": {
            "title": "Height",
            "type": "integer",
            "description": "The height of the image"
          },
          "file_size": {
            "examples": [
              4404019
            ],
            "title": "File Size",
            "type": "integer",
            "description": "The size of the file in bytes."
          },
          "url": {
            "title": "Url",
            "type": "string",
            "description": "The URL where the file can be downloaded from."
          },
          "width": {
            "title": "Width",
            "type": "integer",
            "description": "The width of the image"
          },
          "file_name": {
            "examples": [
              "z9RV14K95DvU.png"
            ],
            "title": "File Name",
            "type": "string",
            "description": "The name of the file. It will be auto-generated if not provided."
          },
          "content_type": {
            "examples": [
              "image/png"
            ],
            "title": "Content Type",
            "type": "string",
            "description": "The mime type of the file."
          },
          "file_data": {
            "format": "binary",
            "title": "File Data",
            "type": "string",
            "description": "File data"
          }
        },
        "x-fal-order-properties": [
          "url",
          "content_type",
          "file_name",
          "file_size",
          "file_data",
          "width",
          "height"
        ],
        "required": [
          "url"
        ]
      }
    }
  },
  "paths": {
    "/fal-ai/birefnet/v2/requests/{request_id}/status": {
      "get": {
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Request ID"
            }
          },
          {
            "name": "logs",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "description": "Whether to include logs (`1`) in the response or not (`0`)."
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request status.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueStatus"
                }
              }
            }
          }
        }
      }
    },
    "/fal-ai/birefnet/v2/requests/{request_id}/cancel": {
      "put": {
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Request ID"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request was cancelled.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "description": "Whether the request was cancelled successfully."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/fal-ai/birefnet/v2": {
      "post": {
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BirefnetV2Input"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The request status.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueStatus"
                }
              }
            }
          }
        }
      }
    },
    "/fal-ai/birefnet/v2/requests/{request_id}": {
      "get": {
        "parameters": [
          {
            "name": "request_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Request ID"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Result of the request.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BirefnetV2Output"
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "https://queue.fal.run"
    }
  ],
  "security": [
    {
      "apiKeyAuth": []
    }
  ]
}